# pgAnalytics Collector v3.0 Configuration

[collector]
id = "collector-001"
hostname = "pganalytics-collector-demo"
interval = 60
push_interval = 60
config_pull_interval = 300

[backend]
url = "https://backend:8080"

[postgres]
host = "postgres"
port = 5432
user = "postgres"
password = "pganalytics"
database = "postgres"
databases = "postgres,pganalytics"

[tls]
verify = false
cert_file = "/etc/pganalytics/collector.crt"
key_file = "/etc/pganalytics/collector.key"

[pg_stats]
enabled = true
interval = 60

[sysstat]
enabled = true
interval = 60

[pg_log]
enabled = true
interval = 300

[disk_usage]
enabled = true
interval = 300

[pg_query_stats]
enabled = true
interval = 60

[postgresql]
# Query statistics collection limit
# Controls how many top queries are collected from pg_stat_statements
#
# Recommendations:
#  - Development (< 100 QPS):     100  (full collection)
#  - Small Prod (100-1K QPS):     500  (5% sampling)
#  - Medium Prod (1K-10K QPS):    1000 (1-10% sampling)
#  - Large Prod (10K+ QPS):       5000 (0.1-1% sampling)
#
# Note: Increasing this limit increases CPU usage for queries
# Default: 100 (backward compatible)
# Min: 10, Max: 10000
query_stats_limit = 100

# Connection pool settings
# Controls how many persistent connections to keep open

# Minimum connections to keep in pool (default: 2)
# Set higher if you have bursty collection patterns
pool_min_size = 2

# Maximum connections to allow (default: 10)
# Increase if you have many collector threads
pool_max_size = 10

# Connection idle timeout in seconds (default: 300)
# Close connections idle for this long
pool_idle_timeout = 300

[collector_threading]
# Thread pool configuration for parallel collector execution

# Number of worker threads for collector execution (default: 4)
# Recommended: number of CPU cores
# Set to 1 for sequential execution (backward compatible)
thread_pool_size = 4
